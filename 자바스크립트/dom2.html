<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Dom 객체_끝말잇기 게임_이벤트 리스너 방식</title>

<body>
<p id = 'order'>참가자</p>
<p> 
	<div id = word>제시어:</div> 
</p>
<input type="text" placeholder="단어를 제시해 주세요">
<button>button</button><br>

</body>

<script type="text/javascript">
	const number = Number(prompt('몇 명이 참가하나요?'));
	const $button = document.querySelector('button');
	const $input = document.querySelector('input');
	const $word = document.querySelector("#word");  // Dom 구조의 데이터들중에서 태그안에 id = '값' 설정할수 있는데
	const $order = document.querySelector('#order');
	let order; // 참가자 순서
	let word;   // 제시어
	let newWord; // 현재 단어
	
	/* 이벤트 함수 */
	const onClickButton = ()=>{
		if(!word){ // 최초 실행할때 word는 비어있다. 그래서 undefined  !을 하면 true가되어서 실행
			word = newWord; // 단어
			$word.textContent = '제시어:'+word; // 태그.textContext 태그 내부의 문자열을 가져오거나 설정
			order = 1;
			$order.textContent = order+'번 참가자';
		}else{ 
			if(word[word.length-1] === newWord[0]){  // 끝말잇기가 잘 연결된 경우
				// 화면에 표시한다.
				word = newWord;
				$word.textContent = '제시어'+word;
				if(order >= number){
					order = 1;
					$order.textContent = order+'번 참가자';
				}else{
					order += 1;
					$order.textContent = order+'번 참가자';					
				}
				
			}else{
				// 끝말잇기가 실패
				alert("올바르지 않은 단어 입니다.");
			}
		}	
	};	
	const onInput = (event)=>{
		newWord = event.target.value;  // 입력하는 단어를 현재 단어로 변경
		console.log('newWord',event.target.value); // 디버깅용 콘솔화면에 잘 되는지 확인하기 위해 출력
	}
	
	/* 이벤트 리스너 */
	$button.addEventListener('click', onClickButton);
	$input.addEventListener('input', onInput);
		
	
	/* dom 객체에 있는 button tag 객체를가져온다 */
	/* button 객체에 이벤트리스너를 통해 이벤트를 등록한다 */
	/* $button.addEventListener('click', onClickButton); */
	/* 입력 tag에 대한 이벤트 처리   */
	
</script>



</html>




